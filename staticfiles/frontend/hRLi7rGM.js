import{_ as I}from"./BCQJG_Oq.js";import{_ as R}from"./DNxVGkmg.js";import{_ as j}from"./1e_OgHv1.js";import{_ as D}from"./whb824ZH.js";import{_ as N}from"./hFEWv2RF.js";import{_ as K}from"./CtEReCdd.js";import{_ as O}from"./B0T2F3Rs.js";import{_ as L}from"./8uu4DbCJ.js";import{_ as Z}from"./D6fuHc-1.js";import{_ as H}from"./B3CiF0uY.js";import{a as J}from"./BV2_MSoD.js";import{u as W}from"./BVROmUMH.js";import{r as u,k as C,E as z,f as X,w as r,o as f,b as s,a as i,h as l,c as $,G as Y,F as q,j as Q,n as ee}from"./DStkSF2J.js";import"./ClWK6Wa4.js";import"./DWroXZBg.js";import"./xqgN8d_2.js";import"./Chyrqj9S.js";import"./PJp5FNsK.js";import"./BwxCvApI.js";import"./DnH1ldC5.js";import"./BDRGNAdl.js";import"./DQnXjg0H.js";import"./jtrurJ-I.js";const te=i("h1",{class:"text-center text-4xl my-8"},"Add A Classified Post",-1),oe=i("div",{class:"flex gap-4 items-center"},null,-1),ae={class:"grid md:grid-cols-2 gap-4"},le={class:"flex flex-wrap gap-5"},se=["src","alt"],ie=["onClick"],ne={class:"w-full h-full border flex items-center justify-center max-w-[200px] max-h-[200px] relative"},re={class:"grid md:grid-cols-2 gap-4"},ce={class:"grid md:grid-cols-2 gap-4"},de={class:"text-center"},v="https://api.countrystatecity.in/v1/countries",Be={__name:"new",setup(ue){const{get:A,post:k}=J(),T=W(),y=u([]),g=u([]),x=u([]),b=u([]);u([]);const e=u({price:0,instructions:"",title:"",medias:[],category:"",country:"",state:"",city:"",location:"",accepted_terms:!1,accepted_privacy:!1});function h(t,o){const c=Array.from(t.target.files),d=new FileReader;d.onload=()=>{e.value.medias.push(d.result)},d.onerror=n=>reject(n),d.readAsDataURL(c[0])}function F(t){t>=0&&t<e.value.medias.length&&e.value.medias.splice(t,1)}async function P(){console.log(e.value);const t=new FormData;t.append("title",e.value.title),t.append("price",e.value.price),t.append("instructions",e.value.instructions),t.append("image",e.value.image),t.append("category",e.value.category),t.append("accepted_terms",e.value.accepted_terms),t.append("accepted_privacy",e.value.accepted_privacy),t.append("medias",e.value.medias),t.append("location",e.value.location),t.append("country",e.value.country),t.append("state",e.value.state),t.append("city",e.value.city),(await k("/classified-categories-post/",e.value)).data&&(ee("/"),T.add({title:"Classified Service Added"}))}async function E(){try{const[t]=await Promise.all([A("/classified-categories/")]);y.value=t.data}catch(t){console.error("Error fetching micro-gigs data:",t)}}C(()=>{E()});const m={method:"GET",headers:{"X-CSCAPI-KEY":"NHhvOEcyWk50N2Vna3VFTE00bFp3MjFKR0ZEOUhkZlg4RTk1MlJlaA=="},redirect:"follow"};async function S(){const t=await $fetch(v,m);g.value=t,console.log(t)}return C(()=>{setTimeout(()=>{S()},100)}),z(()=>e.value.country,async(t,o)=>{if(t){const c=await $fetch(`${v}/${e.value.country}/states/`,m);x.value=c}}),z(()=>e.value.state,async(t,o)=>{if(t){const c=await $fetch(`${v}/${e.value.country}/states/${e.value.state}/cities`,m);b.value=c}}),(t,o)=>{const c=I,d=R,n=j,V=D,p=N,w=K,U=O,M=L,B=Z,G=H;return f(),X(G,null,{default:r(()=>[s(B,null,{default:r(()=>[te,s(c,{label:"",class:"mb-8"}),i("form",{action:"#",class:"max-w-2xl mx-auto space-y-3",onSubmit:Q(P,["prevent"])},[s(n,{label:"Title"},{default:r(()=>[s(d,{type:"text",size:"md",color:"white",class:"relative",placeholder:"Title",modelValue:l(e).title,"onUpdate:modelValue":o[0]||(o[0]=a=>l(e).title=a),ui:{size:{md:"text-base"}}},null,8,["modelValue"])]),_:1}),oe,s(n,{label:"Instruction"},{default:r(()=>[s(V,{color:"white",variant:"outline",ui:{size:{md:"text-base"}},class:"w-full",resize:"",placeholder:"Instruction",modelValue:l(e).instructions,"onUpdate:modelValue":o[1]||(o[1]=a=>l(e).instructions=a)},null,8,["modelValue"])]),_:1}),i("div",ae,[s(n,{label:"Category"},{default:r(()=>[s(p,{modelValue:l(e).category,"onUpdate:modelValue":o[2]||(o[2]=a=>l(e).category=a),color:"white",size:"md",options:l(y),placeholder:"Target Category",ui:{size:{md:"text-base"}},"option-attribute":"title","value-attribute":"id"},null,8,["modelValue","options"])]),_:1}),s(n,{label:"Price"},{default:r(()=>[s(d,{icon:"i-mdi:currency-bdt",type:"text",size:"md",color:"white",ui:{size:{md:"text-base"}},placeholder:"2.0",class:"max-w-40",modelValue:l(e).price,"onUpdate:modelValue":o[3]||(o[3]=a=>l(e).price=a)},null,8,["modelValue"])]),_:1})]),s(n,{label:"Upload Photo/Video"},{default:r(()=>[i("input",{type:"file",name:"",id:"",onChange:o[4]||(o[4]=a=>h(a,"image"))},null,32)]),_:1}),i("div",le,[(f(!0),$(q,null,Y(l(e).medias,(a,_)=>(f(),$("div",{class:"relative max-w-[200px] max-h-[200px]",key:_},[i("img",{src:a,alt:`Uploaded file ${_}`},null,8,se),i("div",{class:"absolute top-2 right-2 rounded-sm bg-white cursor-pointer",onClick:pe=>F(_)},[s(w,{name:"i-heroicons-trash-solid",class:"text-red-500"})],8,ie)]))),128)),i("div",ne,[i("input",{type:"file",name:"",id:"",class:"h-full w-full absolute left-0 top-0 z-10 cursor-pointer opacity-0",onChange:o[5]||(o[5]=a=>h(a,"image"))},null,32),s(w,{name:"i-heroicons-plus-solid",size:"66"})])]),i("div",re,[s(n,{label:"Country"},{default:r(()=>[s(p,{modelValue:l(e).country,"onUpdate:modelValue":o[6]||(o[6]=a=>l(e).country=a),color:"white",size:"md",options:l(g),placeholder:"Country",ui:{size:{md:"text-base"}},"option-attribute":"name","value-attribute":"iso2"},null,8,["modelValue","options"])]),_:1}),s(n,{label:"State"},{default:r(()=>[s(p,{modelValue:l(e).state,"onUpdate:modelValue":o[7]||(o[7]=a=>l(e).state=a),color:"white",size:"md",options:l(x),placeholder:"State",ui:{size:{md:"text-base"}},"option-attribute":"name","value-attribute":"iso2"},null,8,["modelValue","options"])]),_:1})]),i("div",ce,[s(n,{label:"City"},{default:r(()=>[s(p,{modelValue:l(e).city,"onUpdate:modelValue":o[8]||(o[8]=a=>l(e).city=a),color:"white",size:"md",options:l(b),placeholder:"City",ui:{size:{md:"text-base"}},"option-attribute":"name","value-attribute":"name"},null,8,["modelValue","options"])]),_:1})]),i("div",null,[s(n,{label:"Address"},{default:r(()=>[s(V,{modelValue:l(e).location,"onUpdate:modelValue":o[9]||(o[9]=a=>l(e).location=a),color:"white",variant:"outline",class:"w-full",resize:"",placeholder:"Chewriya, Kushtia"},null,8,["modelValue"])]),_:1})]),s(U,{name:"notifications",label:"Accept Terms",modelValue:l(e).accepted_terms,"onUpdate:modelValue":o[10]||(o[10]=a=>l(e).accepted_terms=a)},null,8,["modelValue"]),s(U,{name:"notifications",label:"Accept Privacy",modelValue:l(e).accepted_privacy,"onUpdate:modelValue":o[11]||(o[11]=a=>l(e).accepted_privacy=a)},null,8,["modelValue"]),i("div",de,[s(M,{class:"px-8",size:"lg",color:"primary",variant:"solid",label:"Post",type:"submit"})])],32)]),_:1})]),_:1})}}};export{Be as default};
